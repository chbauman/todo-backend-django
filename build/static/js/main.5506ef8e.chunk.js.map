{"version":3,"sources":["components/TodoGroup.tsx","backendInterface/baseInterface.tsx","backendInterface/djangoInterface.tsx","components/Login.tsx","components/CompHeader.tsx","hooks/registerRerender.tsx","util/util.tsx","components/GroupSelect.tsx","components/NewTodo.tsx","components/Todo.tsx","components/PendingTodos.tsx","components/Register.tsx","App.tsx","index.tsx"],"names":["getNewId","uuidv4","isGroup","gt","type","TodoHandler","todoTree","root","subTreeRoot","onChangedCbDict","initialized","this","init","undefined","rootId","generateNewId","rootGroup","name","parentId","id","childrenIds","createdAt","Date","groupList","todo","newGroup","key","cb","Object","keys","forEach","map","filter","Error","done","changeHappened","newGroupId","prevGroup","getParent","childId","push","parentGroupId","getNewBaseObject","text","newTodo","parent","parId","todoToDelete","el","deleteTodo","groups","currGroup","getGroupListHelper","extTree","getTodoListHelper","currGroupList","currTodo","newList","childTodoId","childTodo","globalTodoHandler","BackendInterface","loadedTodos","loadedGroups","groupMap","retTree","console","log","convertedGroup","created","parGroup","parent_group_name","child","parent_name","self","tt","getAllGroups","parentGroup","parentName","items","values","getTodoList","DEBUG","process","REACT_APP_DEBUG","baseUrl","contTypeHeader","storageTokenId","DjangoInterface","userData","isLoggedIn","url","requestData","a","fetch","method","headers","body","JSON","stringify","credentials","getPostData","data","loginSuccessful","ok","json","jsonDat","token","userName","username","localStorage","setItem","loadUserData","tok","getItem","parse","todosUrl","get","todos","todoJson","todoGroupsUrl","todoGroups","todoGroupsJson","convertAndInit","getAuthHeader","Authorization","prepareSaving","post","resp","groupsUploaded","catch","e","respJson","urlItems","respItems","itemsUploaded","saveSuccessful","accoundData","loginUser","removeItem","djangoInterface","window","Login","setLogin","setCreatingAccount","useState","password","cred","setCred","Container","Form","Group","controlId","Label","Control","onChange","target","value","Button","onClick","CompHeader","props","useRegisteredRerender","compId","dummy","setDummy","registerOnChanged","delayAtLeast","ms","started","now","res","elapsed","delayFurther","Promise","r","setTimeout","isSVG","nodeName","toLowerCase","StayOpenDropdown","children","rest","show","setShow","DropdownButton","align","onToggle","isOpen","originalEvent","elIsSVG","firstChildIsSVG","firstChild","str","isLabel","isSelect","startsWith","GroupSelect","onChangeCB","options","label","selectedOption","setSelectedOption","defaultValue","inp","NewGroup","useNewTodoComp","input","groupId","addGroup","NewTodo","addTodo","title","handleInput","inputRef","useRef","groupRef","Row","className","Col","as","md","placeholder","ref","current","inputEl","TodoComponent","groupCrumbs","groupsNotShown","currentGroup","labelStyle","fontSize","marginBottom","paddingBottom","currParentGroups","idx","subGroups","slice","setGroup","concat","style","paddingTop","marginTop","getTextCompNew","doneButt","size","setToDone","ddItems","Dropdown","Item","minWidth","changeItemGroup","stayOpenDD","buttGroup","ButtonGroup","compareDates","b","NaN","aNum","valueOf","bNum","aLarger","Number","bLarger","isFinite","PendingTodos","todoDict","todoList","completed","openTodos","sort","todoMapper","RegisterPage","setLoggedIn","email","lastname","accDet","setAccDet","onRegister","createAccountAndLogin","userOrNull","App","logout","initGroup","group","wrappedSetGroup","setGroupAsSelected","getNav","currName","Navbar","bg","expand","Brand","href","Toggle","Collapse","Nav","Link","save","FullApp","initUser","getUser","initState","state","stateAndUsername","setState","optionalUserName","login","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5506ef8e.chunk.js","sourcesContent":["import { v4 as uuidv4 } from \"uuid\";\r\n\r\ntype TodoType = \"todo\" | \"group\";\r\n\r\n/** Base todo interface.\r\n *\r\n * The id is a UUID that is generated when the object is created.\r\n */\r\ninterface TodoBase {\r\n  id: string;\r\n  parentId: string | null;\r\n  type: TodoType;\r\n  createdAt: Date | null;\r\n}\r\n\r\nexport interface Todo extends TodoBase {\r\n  type: \"todo\";\r\n  text: string;\r\n  done: Date | null;\r\n  createdAt: Date;\r\n}\r\n\r\nexport interface TodoGroup extends TodoBase {\r\n  type: \"group\";\r\n  name: string;\r\n  childrenIds: string[];\r\n}\r\n\r\nexport type GeneralTodo = TodoGroup | Todo;\r\n\r\nexport const getNewId = () => {\r\n  return uuidv4();\r\n};\r\n\r\nexport const isGroup = (gt: GeneralTodo): gt is TodoGroup => {\r\n  return gt.type === \"group\";\r\n};\r\n\r\nexport type TodoTree = { [key: string]: GeneralTodo };\r\n\r\nexport type TodoGroupAndGroups = { todo: TodoGroup; groupList: TodoGroup[] };\r\nexport type TodoAndGroups = { todo: Todo; groupList: TodoGroup[] };\r\ntype TodoListifiedTree = {\r\n  [key: string]: TodoAndGroups;\r\n};\r\n\r\nexport class TodoHandler {\r\n  todoTree!: TodoTree;\r\n  root!: TodoGroup;\r\n  subTreeRoot!: TodoGroupAndGroups;\r\n\r\n  onChangedCbDict: { [key: string]: VoidFunction } = {};\r\n  initialized = false;\r\n\r\n  constructor() {\r\n    // Generate root todo group.\r\n    this.init({});\r\n  }\r\n\r\n  init(todoTree: TodoTree, root?: TodoGroup) {\r\n    if (root === undefined) {\r\n      const rootId = this.generateNewId();\r\n      const rootGroup: TodoGroup = {\r\n        name: \"root\",\r\n        type: \"group\",\r\n        parentId: null,\r\n        id: rootId,\r\n        childrenIds: [],\r\n        createdAt: new Date(),\r\n      };\r\n      this.todoTree = {};\r\n      this.todoTree[rootId] = rootGroup;\r\n      this.root = rootGroup;\r\n      this.subTreeRoot = { groupList: [], todo: rootGroup };\r\n    } else {\r\n      this.todoTree = todoTree;\r\n      this.subTreeRoot = { groupList: [], todo: root };\r\n      this.root = root;\r\n    }\r\n  }\r\n\r\n  setGroupAsSelected(newGroup: TodoGroupAndGroups) {\r\n    this.subTreeRoot = newGroup;\r\n  }\r\n\r\n  registerOnChanged(key: string, cb: VoidFunction) {\r\n    this.onChangedCbDict[key] = cb;\r\n  }\r\n\r\n  private changeHappened() {\r\n    Object.keys(this.onChangedCbDict).forEach((key) => {\r\n      this.onChangedCbDict[key]();\r\n    });\r\n  }\r\n\r\n  getAllGroups() {\r\n    const todos = Object.keys(this.todoTree).map((key) => this.todoTree[key]);\r\n    return todos.filter(isGroup);\r\n  }\r\n\r\n  setToDone(id: string) {\r\n    const todo = this.todoTree[id];\r\n    if (isGroup(todo)) {\r\n      throw new Error(\"This is a bug, cannot set a group to DONE\");\r\n    }\r\n    todo.done = new Date();\r\n    this.changeHappened();\r\n  }\r\n\r\n  changeItemGroup(id: string, newGroupId: string | null) {\r\n    const todo = this.todoTree[id];\r\n\r\n    // Fix parent child relation\r\n    const prevGroup = this.getParent(todo.parentId);\r\n    prevGroup.childrenIds = prevGroup.childrenIds.filter(\r\n      (childId) => id !== childId\r\n    );\r\n\r\n    const newParent = this.getParent(newGroupId);\r\n    newParent.childrenIds.push(id);\r\n\r\n    todo.parentId = newGroupId;\r\n    this.changeHappened();\r\n  }\r\n\r\n  generateNewId() {\r\n    return getNewId();\r\n  }\r\n\r\n  addGroup(name: string, parentGroupId: string | null = null) {\r\n    const newGroup: TodoGroup = {\r\n      ...this.getNewBaseObject(parentGroupId),\r\n      name: name,\r\n      type: \"group\",\r\n      childrenIds: [],\r\n    };\r\n    this.todoTree[newGroup.id] = newGroup;\r\n    this.changeHappened();\r\n    return newGroup.id;\r\n  }\r\n\r\n  addTodo(text: string, parentGroupId: string | null = null) {\r\n    const newTodo: Todo = {\r\n      ...this.getNewBaseObject(parentGroupId),\r\n      text: text,\r\n      done: null,\r\n      type: \"todo\",\r\n    };\r\n\r\n    this.todoTree[newTodo.id] = newTodo;\r\n    this.changeHappened();\r\n    return newTodo.id;\r\n  }\r\n\r\n  private getNewBaseObject(parentGroupId: string | null) {\r\n    const parent = this.getParent(parentGroupId);\r\n    const newTodo = {\r\n      id: this.generateNewId(),\r\n      parentId: parent.id,\r\n      createdAt: new Date(),\r\n    };\r\n    parent.childrenIds.push(newTodo.id);\r\n    return newTodo;\r\n  }\r\n\r\n  private getParent(parentGroupId: string | null) {\r\n    const parId = parentGroupId === null ? this.root.id : parentGroupId;\r\n    const parent = this.todoTree[parId];\r\n    if (!isGroup(parent)) {\r\n      throw new Error(\"Parent is not a group!!\");\r\n    }\r\n    return parent;\r\n  }\r\n\r\n  deleteTodo(id: string) {\r\n    const todoToDelete = this.todoTree[id];\r\n\r\n    // Delete recursively if it is a group\r\n    if (isGroup(todoToDelete)) {\r\n      todoToDelete.childrenIds.forEach((el) => {\r\n        this.deleteTodo(el);\r\n      });\r\n    }\r\n\r\n    // Delete from parent's children\r\n    const parent = this.getParent(todoToDelete.parentId);\r\n    parent.childrenIds = parent.childrenIds.filter((el) => el !== id);\r\n\r\n    // Do the actual delete\r\n    delete this.todoTree[id];\r\n    this.changeHappened();\r\n  }\r\n\r\n  getGroupList() {\r\n    const groups: TodoGroup[] = [this.root];\r\n    const currGroup = this.root;\r\n    this.getGroupListHelper(groups, currGroup);\r\n    return groups;\r\n  }\r\n\r\n  private getGroupListHelper(groups: TodoGroup[], currGroup: TodoGroup) {\r\n    for (const childId of currGroup.childrenIds) {\r\n      const todo = this.todoTree[childId];\r\n      if (isGroup(todo)) {\r\n        groups.push(todo);\r\n        this.getGroupListHelper(groups, todo);\r\n      }\r\n    }\r\n  }\r\n\r\n  getTodoList() {\r\n    const extTree: TodoListifiedTree = {};\r\n    const currGroupList: TodoGroup[] = [];\r\n\r\n    this.getTodoListHelper(extTree, currGroupList, this.subTreeRoot.todo);\r\n    return extTree;\r\n  }\r\n\r\n  private getTodoListHelper(\r\n    extTree: TodoListifiedTree,\r\n    currGroupList: TodoGroup[],\r\n    currTodo: GeneralTodo\r\n  ) {\r\n    if (isGroup(currTodo)) {\r\n      const newList = [...currGroupList, currTodo];\r\n      for (const childTodoId of currTodo.childrenIds) {\r\n        const childTodo = this.todoTree[childTodoId];\r\n        this.getTodoListHelper(extTree, newList, childTodo);\r\n      }\r\n    } else {\r\n      extTree[currTodo.id] = { todo: currTodo, groupList: currGroupList };\r\n    }\r\n  }\r\n}\r\n\r\nexport const globalTodoHandler = new TodoHandler();\r\n","import {\r\n  getNewId,\r\n  globalTodoHandler,\r\n  Todo,\r\n  TodoGroup,\r\n  TodoTree,\r\n} from \"../components/TodoGroup\";\r\nimport { AccountDetails, Credentials } from \"../util/types\";\r\n\r\n/** Todo item as stored on backend.\r\n *\r\n * The id is a number and not used on the frontend.\r\n * Does not have to be set when posted.\r\n */\r\nexport type BackendTodo = {\r\n  created: Date;\r\n  text: string;\r\n  id: number | null;\r\n  done: null | Date;\r\n  parent_group_name: string;\r\n};\r\n\r\n/** TodoGroup as stored on backend.\r\n *\r\n * The backend uses the name of the group as id!\r\n */\r\nexport type BackendTodoGroup = {\r\n  created: Date | null;\r\n  name: string;\r\n  parent_name: string | null;\r\n};\r\n\r\nexport abstract class BackendInterface {\r\n  loadedTodos: null | BackendTodo[] = null;\r\n  loadedGroups: null | BackendTodoGroup[] = null;\r\n\r\n  /** Login user.\r\n   *\r\n   * If successcul, the user data shall be loaded using loadUserData().\r\n   */\r\n  abstract loginUser(credentials: Credentials): Promise<boolean>;\r\n\r\n  /** Returns the currently logged-in user, if any. */\r\n  abstract getUser(): string | null;\r\n  abstract logout(): void;\r\n\r\n  /** Saves the current data to the backend. */\r\n  abstract save(): Promise<boolean>;\r\n\r\n  /** Loads the data and populates the fields loadedTodos and loadedGroups. */\r\n  abstract loadUserData(): Promise<void>;\r\n\r\n  /** Converts the backend structures. */\r\n  convertAndInit() {\r\n    if (this.loadedTodos === null || this.loadedGroups === null) {\r\n      console.log(\"Fuck\");\r\n      return;\r\n    }\r\n    // Mapping from group names to groups\r\n    const groupMap: { [key: string]: TodoGroup } = {};\r\n    const retTree: TodoTree = {};\r\n    console.log(\"Items:\", this.loadedTodos);\r\n\r\n    // Initialize groups without children or parents\r\n    this.loadedGroups.forEach((el) => {\r\n      const id = getNewId();\r\n      const convertedGroup: TodoGroup = {\r\n        createdAt: el.created,\r\n        name: el.name,\r\n        type: \"group\",\r\n        id,\r\n        childrenIds: [],\r\n        parentId: null,\r\n      };\r\n      groupMap[el.name] = convertedGroup;\r\n      retTree[id] = convertedGroup;\r\n    });\r\n\r\n    // Convert todo items and populate group children list\r\n    this.loadedTodos.forEach((el) => {\r\n      const parGroup = groupMap[el.parent_group_name];\r\n      if (parGroup === undefined) {\r\n        console.log(\"Invalid tree, orphan\", el);\r\n      }\r\n      const id = getNewId();\r\n      parGroup.childrenIds.push(id);\r\n      const child: Todo = {\r\n        parentId: parGroup.id,\r\n        id,\r\n        type: \"todo\",\r\n        text: el.text,\r\n        createdAt: el.created,\r\n        done: el.done,\r\n      };\r\n      retTree[id] = child;\r\n    });\r\n\r\n    // Populate parent id / children relationship for groups\r\n    this.loadedGroups.forEach((el) => {\r\n      if (el.parent_name) {\r\n        const parGroup = groupMap[el.parent_name];\r\n        const self = groupMap[el.name];\r\n        self.parentId = parGroup.id;\r\n        parGroup.childrenIds.push(self.id);\r\n      }\r\n    });\r\n\r\n    const root = groupMap[\"root\"];\r\n    globalTodoHandler.init(retTree, root);\r\n  }\r\n\r\n  /** Converts to backend objects. */\r\n  prepareSaving() {\r\n    const tt = globalTodoHandler.todoTree;\r\n\r\n    const groups = globalTodoHandler.getAllGroups();\r\n    this.loadedGroups = groups.map((el) => {\r\n      const parentGroup = el.parentId ? tt[el.parentId] : null;\r\n      let parentName = null;\r\n      if (parentGroup !== null) {\r\n        parentName = (parentGroup as TodoGroup).name;\r\n      }\r\n      return {\r\n        created: el.createdAt,\r\n        name: el.name,\r\n        parent_name: parentName,\r\n      };\r\n    });\r\n\r\n    // Convert items\r\n    const items = Object.values(globalTodoHandler.getTodoList()).map(\r\n      (el) => el.todo\r\n    );\r\n    this.loadedTodos = items.map((el) => {\r\n      const parGroup = tt[el.parentId as string] as TodoGroup;\r\n      return {\r\n        created: el.createdAt,\r\n        text: el.text,\r\n        done: el.done,\r\n        parent_group_name: parGroup.name,\r\n        id: null,\r\n      };\r\n    });\r\n  }\r\n\r\n  /** Creates a user account.\r\n   *\r\n   * Returns null if creation was not successful.\r\n   */\r\n  abstract createAccountAndLogin(\r\n    accoundData: AccountDetails\r\n  ): Promise<string | null>;\r\n}\r\n","import { AccountDetails, Credentials } from \"../util/types\";\r\nimport { BackendInterface } from \"./baseInterface\";\r\n\r\nconst DEBUG = process.env.REACT_APP_DEBUG;\r\n\r\n/** Backend url. */\r\nconst baseUrl = DEBUG\r\n  ? \"http://127.0.0.1:8000/\"\r\n  : \"https://chbauman.pythonanywhere.com/\";\r\nconsole.log(\"Debug: \", DEBUG, baseUrl);\r\n\r\nconst contTypeHeader = {\r\n  \"Content-Type\": \"application/json\",\r\n};\r\nconst storageTokenId = \"currUserToken\";\r\n\r\nclass DjangoInterface extends BackendInterface {\r\n  userData: {\r\n    token: string;\r\n    userName: string;\r\n  } | null = null;\r\n\r\n  constructor() {\r\n    super();\r\n    this.isLoggedIn();\r\n  }\r\n\r\n  async getPostData(url: string, requestData: any) {\r\n    return fetch(url, {\r\n      method: \"POST\",\r\n      headers: contTypeHeader,\r\n      body: JSON.stringify(requestData),\r\n    });\r\n  }\r\n\r\n  /** Login a user with the given credentials. */\r\n  async loginUser(credentials: Credentials) {\r\n    const url = `${baseUrl}api-token-auth/`;\r\n    const data = await this.getPostData(url, credentials);\r\n    const loginSuccessful = data.ok;\r\n    if (loginSuccessful) {\r\n      const jsonDat = await data.json();\r\n      const userData = { token: jsonDat.token, userName: credentials.username };\r\n      localStorage.setItem(storageTokenId, JSON.stringify(userData));\r\n      this.userData = userData;\r\n      await this.loadUserData();\r\n    }\r\n    return loginSuccessful;\r\n  }\r\n\r\n  private isLoggedIn() {\r\n    const tok = localStorage.getItem(storageTokenId);\r\n    const isLoggedIn = tok !== null;\r\n    if (isLoggedIn) {\r\n      this.userData = JSON.parse(tok);\r\n    }\r\n    return isLoggedIn;\r\n  }\r\n\r\n  async loadUserData() {\r\n    const todosUrl = `${baseUrl}todo_items/`;\r\n    const todos = await this.get(todosUrl);\r\n    const todoJson = await todos.json();\r\n    if (!todos.ok) {\r\n      console.log(\"Failed to fetch todos\", todoJson);\r\n      return;\r\n    }\r\n    const todoGroupsUrl = `${baseUrl}todo_groups/`;\r\n    const todoGroups = await this.get(todoGroupsUrl);\r\n    const todoGroupsJson = await todoGroups.json();\r\n    if (!todos.ok) {\r\n      console.log(\"Failed to fetch groups\", todoGroupsJson);\r\n      return;\r\n    }\r\n    this.loadedTodos = todoJson;\r\n    this.loadedGroups = todoGroupsJson;\r\n    this.convertAndInit();\r\n  }\r\n\r\n  private async get(url: string) {\r\n    return fetch(url, {\r\n      method: \"GET\",\r\n      headers: this.getAuthHeader(),\r\n    });\r\n  }\r\n\r\n  private async post(url: string, data: any) {\r\n    return fetch(url, {\r\n      method: \"POST\",\r\n      headers: this.getAuthHeader(),\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  private getAuthHeader() {\r\n    if (this.userData === null) {\r\n      throw new Error(\"Not logged in!\");\r\n    }\r\n    return {\r\n      ...contTypeHeader,\r\n      Authorization: `Token ${this.userData?.token}`,\r\n    };\r\n  }\r\n\r\n  async save() {\r\n    this.prepareSaving();\r\n    if (this.loadedGroups === null || this.loadedTodos === null) {\r\n      return false;\r\n    }\r\n    const url = `${baseUrl}todo_groups/`;\r\n    const resp = await this.post(url, this.loadedGroups);\r\n    const groupsUploaded = resp.ok;\r\n    if (!groupsUploaded) {\r\n      const respJson = await resp.json().catch((e: any) => console.log(e));\r\n      console.log(\"Posting groups failed:\", this.loadedGroups, respJson);\r\n    }\r\n\r\n    const urlItems = `${baseUrl}todo_items/`;\r\n    const respItems = await this.post(urlItems, this.loadedTodos);\r\n    const itemsUploaded = respItems.ok;\r\n    if (!itemsUploaded) {\r\n      const respJson = await respItems.json().catch((e: any) => console.log(e));\r\n      console.log(\"Posting todos failed:\", this.loadedTodos, respJson);\r\n    }\r\n    const saveSuccessful = groupsUploaded && itemsUploaded;\r\n    if (saveSuccessful) {\r\n      console.log(\"Successfully saved!\");\r\n    }\r\n    return saveSuccessful;\r\n  }\r\n\r\n  async createAccountAndLogin(accoundData: AccountDetails) {\r\n    const url = `${baseUrl}create_user/`;\r\n    const data = await this.getPostData(url, accoundData);\r\n    if (!data.ok) {\r\n      return null;\r\n    }\r\n    const loginSucc = await this.loginUser(accoundData);\r\n    if (loginSucc) {\r\n      return accoundData.username;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  logout() {\r\n    this.userData = null;\r\n    localStorage.removeItem(storageTokenId);\r\n  }\r\n\r\n  getUser() {\r\n    if (this.isLoggedIn() && this.userData !== null) {\r\n      return this.userData.userName;\r\n    }\r\n    return null;\r\n  }\r\n}\r\n\r\nexport const djangoInterface: BackendInterface = new DjangoInterface();\r\n(window as any).djangoInterface = djangoInterface;\r\n","import { useState } from \"react\";\r\nimport { Button, Container, Form } from \"react-bootstrap\";\r\nimport { Credentials } from \"../util/types\";\r\n\r\n/** Login component. */\r\nexport const Login = ({\r\n  setLogin,\r\n  setCreatingAccount,\r\n}: {\r\n  setLogin: (c: Credentials) => void;\r\n  setCreatingAccount: (b: boolean) => void;\r\n}) => {\r\n  const [cred, setCred] = useState<Credentials>({ password: \"\", username: \"\" });\r\n\r\n  return (\r\n    <Container>\r\n      <h5>Login</h5>\r\n      <Form>\r\n        <Form.Group controlId=\"formUser\">\r\n          <Form.Label>Enter username:</Form.Label>\r\n          <Form.Control\r\n            type=\"text\"\r\n            onChange={(e: any) =>\r\n              setCred({ ...cred, username: e.target.value })\r\n            }\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Form.Group controlId=\"formPassword\">\r\n          <Form.Label>Enter password:</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            onChange={(e: any) =>\r\n              setCred({ ...cred, password: e.target.value })\r\n            }\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Button onClick={() => setLogin(cred)}>Login</Button>\r\n      </Form>\r\n      <Button onClick={() => setCreatingAccount(true)}>\r\n        Create new account.\r\n      </Button>\r\n    </Container>\r\n  );\r\n};\r\n","export default function CompHeader(props: { text: string }) {\r\n  return <h5>{props.text}</h5>;\r\n}\r\n","import { useState } from \"react\";\r\nimport { globalTodoHandler } from \"../components/TodoGroup\";\r\n\r\nexport const useRegisteredRerender = (compId: string) => {\r\n  // Hack for enforcing re-render when todos change\r\n  const [dummy, setDummy] = useState<number>(0);\r\n  const reRender = () => setDummy(dummy + 1);\r\n  globalTodoHandler.registerOnChanged(compId, reRender);\r\n};\r\n","import { useState } from \"react\";\r\nimport { DropdownButton } from \"react-bootstrap\";\r\n\r\n/** Delays an async function such that it takes at leas ms milli-seconds.\r\n *\r\n * Does not delay if it is not resolved within that time frame.\r\n */\r\nexport const delayAtLeast = async (cb: () => Promise<any>, ms: number) => {\r\n  const started = Date.now();\r\n  const res = await cb();\r\n  const elapsed = Date.now() - started;\r\n  const delayFurther = ms - elapsed;\r\n  if (delayFurther > 0) {\r\n    await new Promise((r) => setTimeout(r, delayFurther));\r\n  }\r\n  return res;\r\n};\r\n\r\nexport function undefinedToNull<Type>(inp: Type | null | undefined) {\r\n  if (inp === undefined) {\r\n    return null;\r\n  }\r\n  return inp;\r\n}\r\n\r\nconst isSVG = (el: any) => el.nodeName.toLowerCase() === \"svg\";\r\n\r\nexport const StayOpenDropdown = ({ children, ...rest }: any) => {\r\n  const [show, setShow] = useState(false);\r\n  const onToggle = (isOpen: boolean, e: any) => {\r\n    const target = e.originalEvent.target;\r\n\r\n    // Do not close if target belongs to group selection input field!\r\n    const elIsSVG = isSVG(target);\r\n    const firstChildIsSVG = isSVG(target.firstChild);\r\n    const str = target.firstChild.id;\r\n    const isLabel = target.id && target.id === \"change-group-label\";\r\n    const isSelect = str && str.startsWith(\"react-select\");\r\n    if (elIsSVG || firstChildIsSVG || isLabel || isSelect) {\r\n      return;\r\n    }\r\n\r\n    const isShown = isOpen;\r\n    setShow(isShown);\r\n  };\r\n\r\n  return (\r\n    <DropdownButton align=\"end\" show={show} onToggle={onToggle} {...rest}>\r\n      {children}\r\n    </DropdownButton>\r\n  );\r\n};\r\n","import { useState } from \"react\";\r\nimport Select from \"react-select\";\r\nimport { useRegisteredRerender } from \"../hooks/registerRerender\";\r\nimport { undefinedToNull } from \"../util/util\";\r\nimport { globalTodoHandler } from \"./TodoGroup\";\r\n\r\ntype GroupSelectOption = { value: string; label: string };\r\n\r\nexport const GroupSelect = ({\r\n  onChangeCB,\r\n  id,\r\n}: {\r\n  onChangeCB: (newGroupId: string | null) => void;\r\n  id?: string;\r\n}) => {\r\n  const datalist = globalTodoHandler.getAllGroups();\r\n  const options = datalist.map((el) => {\r\n    return { value: el.id, label: el.name };\r\n  });\r\n\r\n  useRegisteredRerender(\"groups-selection\");\r\n\r\n  const [selectedOption, setSelectedOption] =\r\n    useState<GroupSelectOption | null>(null);\r\n  const onChange = (el: GroupSelectOption | null) => {\r\n    setSelectedOption(el);\r\n    onChangeCB(undefinedToNull(el?.value));\r\n  };\r\n\r\n  return (\r\n    <Select\r\n      defaultValue={selectedOption}\r\n      onChange={onChange}\r\n      options={options}\r\n      id={id}\r\n    />\r\n  );\r\n};\r\n","import { useRef } from \"react\";\r\nimport { Button, Col, Form, Row } from \"react-bootstrap\";\r\nimport CompHeader from \"./CompHeader\";\r\nimport { globalTodoHandler } from \"./TodoGroup\";\r\nimport { useRegisteredRerender } from \"../hooks/registerRerender\";\r\nimport { GroupSelect } from \"./GroupSelect\";\r\n\r\n/** Component for adding a new group. */\r\nexport function NewGroup() {\r\n  const handleInput = (input: string, groupId: string | null) =>\r\n    globalTodoHandler.addGroup(input, groupId);\r\n\r\n  return useNewTodoComp(\"New Group:\", handleInput, \"new-group\");\r\n}\r\n\r\n/** Component for adding a new Todo. */\r\nexport function NewTodo() {\r\n  const handleInput = (input: string, groupId: string | null) =>\r\n    globalTodoHandler.addTodo(input, groupId);\r\n\r\n  return useNewTodoComp(\"New task:\", handleInput, \"new-todo\");\r\n}\r\n\r\nconst useNewTodoComp = (\r\n  title: string,\r\n  handleInput: (input: string, groupId: string | null) => void,\r\n  id: string\r\n) => {\r\n  const inputRef = useRef(null);\r\n  const groupRef = useRef<string | null>(null);\r\n  const onGroupChange = (newGroupId: string | null) => {\r\n    groupRef.current = newGroupId;\r\n  };\r\n\r\n  useRegisteredRerender(id);\r\n\r\n  const onAdd = () => {\r\n    const inputEl = inputRef.current as unknown as HTMLInputElement;\r\n    const txt = inputEl.value;\r\n    if (txt !== \"\") {\r\n      handleInput(inputEl.value, groupRef.current);\r\n      inputEl.value = \"\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Row className=\"mt-2\">\r\n        <Col>\r\n          <CompHeader text={title}></CompHeader>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Form.Group as={Col} md={8} controlId={\"text-\" + id}>\r\n          <Form.Control type=\"text\" placeholder=\"Task XYZ\" ref={inputRef} />\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={3} controlId={\"group-select-\" + id}>\r\n          <GroupSelect onChangeCB={onGroupChange} />\r\n        </Form.Group>\r\n        <Form.Group as={Col} md={1} controlId={\"submit-\" + id}>\r\n          <Button onClick={onAdd}>Add</Button>\r\n        </Form.Group>\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\n","import { Button, ButtonGroup, Col, Dropdown, Row } from \"react-bootstrap\";\r\nimport {\r\n  globalTodoHandler,\r\n  Todo,\r\n  TodoGroup,\r\n  TodoGroupAndGroups,\r\n} from \"./TodoGroup\";\r\nimport \"./todo.css\";\r\nimport { GroupSelect } from \"./GroupSelect\";\r\nimport { StayOpenDropdown } from \"../util/util\";\r\n\r\nexport const noSpaceStyle = { margin: 0, padding: 0 };\r\n\r\nconst getTextCompNew = (props: any) => {\r\n  const text = props.todo.text;\r\n  const groupsNotShown = props.currentGroup.groupList;\r\n\r\n  const labelStyle = {\r\n    fontSize: \"12px\",\r\n    marginBottom: 0,\r\n    paddingBottom: 0,\r\n  };\r\n  const label = (\r\n    <>\r\n      {props.currParentGroups.map((el: TodoGroup, idx: number) => {\r\n        const onClick = () => {\r\n          const subGroups = props.currParentGroups.slice(0, idx);\r\n          props.setGroup({\r\n            todo: el,\r\n            groupList: groupsNotShown.concat(subGroups),\r\n          });\r\n        };\r\n        const className = idx === 0 ? \"mb-0\" : \"ms-1 mb-0\";\r\n        return (\r\n          <div\r\n            key={el.id}\r\n            className={\"group-list float-start \" + className}\r\n            onClick={onClick}\r\n            style={labelStyle}\r\n          >\r\n            {el.name + \" / \"}\r\n          </div>\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      {label}\r\n      <br></br>\r\n      <div\r\n        className=\"textdiv mb-2\"\r\n        style={{ paddingTop: 0, marginTop: \"-10px\" }}\r\n      >\r\n        {text}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport function TodoComponent(props: {\r\n  todo: Todo;\r\n  currParentGroups: TodoGroup[];\r\n  setGroup: (grp: TodoGroupAndGroups) => void;\r\n  currentGroup: TodoGroupAndGroups;\r\n}) {\r\n  // Handle text\r\n  const groupCrumbs = getTextCompNew(props);\r\n\r\n  // Define buttons\r\n  const onDone = () => {\r\n    globalTodoHandler.setToDone(props.todo.id);\r\n  };\r\n  const doneButt = props.todo.done ? null : (\r\n    <Button size=\"sm\" onClick={onDone}>\r\n      Done\r\n    </Button>\r\n  );\r\n  const deleteCallback = () => {\r\n    globalTodoHandler.deleteTodo(props.todo.id);\r\n  };\r\n  const changeGroupCb = (newGroupId: string | null) => {\r\n    if (newGroupId) {\r\n      globalTodoHandler.changeItemGroup(props.todo.id, newGroupId);\r\n    } else {\r\n      console.log(\"no new group\");\r\n    }\r\n  };\r\n  const changeContentCallback = () => {\r\n    console.log(\"Not implemented!\");\r\n  };\r\n  const ddItems = (\r\n    <>\r\n      <Dropdown.Item className=\"d-flex flex-row\">\r\n        <div id=\"change-group-label\">Change Group</div>\r\n        <div className=\"ms-2\" style={{ minWidth: 100 }}>\r\n          <GroupSelect\r\n            onChangeCB={changeGroupCb}\r\n            id=\"change-group\"\r\n          ></GroupSelect>\r\n        </div>\r\n      </Dropdown.Item>\r\n      <Dropdown.Item onClick={changeContentCallback}>\r\n        Edit Content\r\n      </Dropdown.Item>\r\n      <Dropdown.Item onClick={deleteCallback}>Delete</Dropdown.Item>\r\n    </>\r\n  );\r\n\r\n  const stayOpenDD = (\r\n    <StayOpenDropdown title=\"Edit\" size=\"sm\">\r\n      {ddItems}\r\n    </StayOpenDropdown>\r\n  );\r\n\r\n  const buttGroup = (\r\n    <ButtonGroup>\r\n      {doneButt}\r\n      {stayOpenDD}\r\n    </ButtonGroup>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col md={9}>{groupCrumbs}</Col>\r\n        <Col md={3}>{buttGroup}</Col>\r\n      </Row>\r\n    </>\r\n  );\r\n}\r\n","import { Col, Row } from \"react-bootstrap\";\r\nimport { useRegisteredRerender } from \"../hooks/registerRerender\";\r\nimport CompHeader from \"./CompHeader\";\r\nimport { TodoComponent } from \"./Todo\";\r\nimport {\r\n  globalTodoHandler,\r\n  TodoAndGroups,\r\n  TodoGroupAndGroups,\r\n} from \"./TodoGroup\";\r\n\r\nconst compareDates = (a: Date | null, b: Date | null) => {\r\n  // Compare two dates (could be of any type supported by the convert\r\n  // function above) and returns:\r\n  //  -1 : if a < b\r\n  //   0 : if a = b\r\n  //   1 : if a > b\r\n  // NaN : if a or b is an illegal date or null\r\n  if (a === null || b === null) {\r\n    return NaN;\r\n  }\r\n  const aNum = a.valueOf();\r\n  const bNum = b.valueOf();\r\n  const aLarger = Number(aNum > bNum);\r\n  const bLarger = Number(aNum < bNum);\r\n  return isFinite(aNum) && isFinite(bNum) ? aLarger - bLarger : NaN;\r\n};\r\n\r\nexport default function PendingTodos(props: {\r\n  setGroup: (grp: TodoGroupAndGroups) => void;\r\n  currentGroup: TodoGroupAndGroups;\r\n}) {\r\n  useRegisteredRerender(\"pending\");\r\n\r\n  const todoDict = globalTodoHandler.getTodoList();\r\n  const todoList = Object.keys(todoDict).map((key) => todoDict[key]);\r\n\r\n  const completed = todoList.filter((el) => el.todo.done !== null);\r\n  const openTodos = todoList.filter((el) => el.todo.done === null);\r\n  openTodos.sort((a, b) => -compareDates(a.todo.createdAt, b.todo.createdAt));\r\n  completed.sort((a, b) => -compareDates(a.todo.done, b.todo.done));\r\n\r\n  const todoMapper = (el: TodoAndGroups) => {\r\n    const todo = el.todo;\r\n    return (\r\n      <TodoComponent\r\n        key={todo.id}\r\n        todo={todo}\r\n        currParentGroups={el.groupList}\r\n        setGroup={props.setGroup}\r\n        currentGroup={props.currentGroup}\r\n      ></TodoComponent>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Row className=\"mt-2\">\r\n      <Col md={8}>\r\n        <CompHeader text={\"Open tasks:\"}></CompHeader>\r\n        {openTodos.map(todoMapper)}\r\n      </Col>\r\n      <Col md={4}>\r\n        <CompHeader text={\"Completed:\"}></CompHeader>\r\n        {completed.map(todoMapper)}\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { Button, Form, Container } from \"react-bootstrap\";\r\nimport { djangoInterface } from \"../backendInterface/djangoInterface\";\r\nimport { AccountDetails } from \"../util/types\";\r\n\r\n/** Register new user page. */\r\nexport const RegisterPage = ({\r\n  setCreatingAccount,\r\n  setLoggedIn,\r\n}: {\r\n  setCreatingAccount: (b: boolean) => void;\r\n  setLoggedIn: (s: string | null) => void;\r\n}) => {\r\n  const [accDet, setAccDet] = useState<AccountDetails>({\r\n    password: \"\",\r\n    username: \"\",\r\n    email: \"\",\r\n    lastname: \"\",\r\n  });\r\n\r\n  const onRegister = async () => {\r\n    const userOrNull = await djangoInterface.createAccountAndLogin(accDet);\r\n    if (userOrNull !== null) {\r\n      setCreatingAccount(false);\r\n      setLoggedIn(userOrNull);\r\n    } else {\r\n      console.log(\"Account creation failed!\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <h5>Create Account</h5>\r\n      <Form>\r\n        <Form.Group controlId=\"formUser\">\r\n          <Form.Label>Username: *</Form.Label>\r\n          <Form.Control\r\n            type=\"text\"\r\n            onChange={(e: any) =>\r\n              setAccDet({ ...accDet, username: e.target.value })\r\n            }\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Form.Group controlId=\"formEmail\">\r\n          <Form.Label>Email: *</Form.Label>\r\n          <Form.Control\r\n            type=\"email\"\r\n            onChange={(e: any) =>\r\n              setAccDet({ ...accDet, email: e.target.value })\r\n            }\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Form.Group controlId=\"formLastName\">\r\n          <Form.Label>Last Name:</Form.Label>\r\n          <Form.Control\r\n            type=\"text\"\r\n            onChange={(e: any) =>\r\n              setAccDet({ ...accDet, lastname: e.target.value })\r\n            }\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Form.Group controlId=\"formPassword\">\r\n          <Form.Label>Password: *</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            onChange={(e: any) =>\r\n              setAccDet({ ...accDet, password: e.target.value })\r\n            }\r\n          ></Form.Control>\r\n        </Form.Group>\r\n        <Button onClick={onRegister}>Create</Button>\r\n      </Form>\r\n      <Button onClick={() => setCreatingAccount(false)}>Back to Login</Button>\r\n    </Container>\r\n  );\r\n};\r\n","import { useState } from \"react\";\nimport { Button, Container, Nav, Navbar } from \"react-bootstrap\";\nimport \"./App.css\";\nimport { djangoInterface } from \"./backendInterface/djangoInterface\";\nimport { Login } from \"./components/Login\";\nimport { NewGroup, NewTodo } from \"./components/NewTodo\";\nimport PendingTodos from \"./components/PendingTodos\";\nimport { RegisterPage } from \"./components/Register\";\nimport { globalTodoHandler, TodoGroupAndGroups } from \"./components/TodoGroup\";\nimport { Credentials } from \"./util/types\";\nimport { delayAtLeast } from \"./util/util\";\n\ntype AppState = \"initialized\" | \"login\" | \"load-data\" | \"create-account\";\ntype AppStateData = {\n  state: AppState;\n  userName: string | null;\n};\n\n/** The main app. */\nconst FullApp = () => {\n  const initUser = djangoInterface.getUser();\n\n  let initState: AppState = \"initialized\";\n  if (initUser === null) {\n    initState = \"login\";\n  } else if (!globalTodoHandler.initialized) {\n    initState = \"load-data\";\n  }\n  const [stateAndUsername, setState] = useState<AppStateData>({\n    state: initState,\n    userName: initUser,\n  });\n  const setLoggedIn = (userName: string | null) =>\n    setState({ state: \"initialized\", userName: userName });\n  const optionalUserName = stateAndUsername.userName;\n  const setCreatingAccount = () => {\n    const nextState: AppStateData = {\n      state: \"create-account\",\n      userName: null,\n    };\n    setState(nextState);\n  };\n  const creatingAccount = stateAndUsername.state === \"create-account\";\n\n  // Return create account component\n  if (creatingAccount) {\n    return (\n      <RegisterPage\n        setCreatingAccount={setCreatingAccount}\n        setLoggedIn={setLoggedIn}\n      ></RegisterPage>\n    );\n  }\n\n  // Return login component if user is not logged in\n  if (optionalUserName === null) {\n    const login = async (credentials: Credentials) => {\n      const loginSuccessful = await djangoInterface.loginUser(credentials);\n      if (loginSuccessful) {\n        setLoggedIn(credentials.username);\n      }\n    };\n    return (\n      <Login setLogin={login} setCreatingAccount={setCreatingAccount}></Login>\n    );\n  }\n\n  // Load data from server if todo handler is not initialized\n  if (!globalTodoHandler.initialized) {\n    const loadUserData = async () => {\n      await delayAtLeast(() => djangoInterface.loadUserData(), 400);\n      globalTodoHandler.initialized = true;\n      setState({ ...stateAndUsername, state: \"initialized\" });\n    };\n    loadUserData();\n    return (\n      <Container>\n        <h2>Loading...</h2>\n      </Container>\n    );\n  }\n\n  // Return app component if user is logged in\n  const logout = () => {\n    djangoInterface.logout();\n    setLoggedIn(null);\n  };\n  return <App userName={optionalUserName} logout={logout}></App>;\n};\n\nconst App = ({\n  userName,\n  logout,\n}: {\n  userName: string;\n  logout: VoidFunction;\n}) => {\n  // Group that is currently focused, only sub-elements should be shown\n  // in the lists. Choose the root initially.\n  const initGroup = globalTodoHandler.root;\n  const [group, setGroup] = useState<TodoGroupAndGroups>({\n    todo: initGroup,\n    groupList: [],\n  });\n  const wrappedSetGroup = (group: TodoGroupAndGroups) => {\n    setGroup(group);\n    globalTodoHandler.setGroupAsSelected(group);\n  };\n\n  return (\n    <Container>\n      {getNav(group, wrappedSetGroup, userName, logout)}\n      <NewTodo></NewTodo>\n      <NewGroup></NewGroup>\n      <PendingTodos\n        setGroup={wrappedSetGroup}\n        currentGroup={group}\n      ></PendingTodos>\n    </Container>\n  );\n};\n\n/** Defines the navigation bar. */\nconst getNav = (\n  group: TodoGroupAndGroups,\n  setGroup: any,\n  userName: string,\n  logout: VoidFunction\n) => {\n  const currName = group.todo.name;\n  const groupList = group.groupList;\n\n  return (\n    <Navbar bg=\"light\" expand=\"md\">\n      <Navbar.Brand href=\"/\">{currName}</Navbar.Brand>\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n      <Navbar.Collapse id=\"basic-navbar-nav\">\n        <Nav className=\"me-auto\">\n          {groupList.map((el, idx) => {\n            const onClick = () => {\n              const subGroups = groupList.slice(0, idx);\n              setGroup({ todo: el, groupList: subGroups });\n            };\n            return (\n              <Nav.Link\n                key={`nav-${el.id}`}\n                onClick={onClick}\n              >{`${el.name} /`}</Nav.Link>\n            );\n          })}\n          <Nav.Link onClick={() => console.log(\"Ignoring your stupid click!\")}>\n            {currName}\n          </Nav.Link>\n        </Nav>\n        <Button onClick={() => djangoInterface.save()}>Save</Button>\n        <Nav>User: {userName}</Nav>\n        <Button onClick={logout}>Logout</Button>\n      </Navbar.Collapse>\n    </Navbar>\n  );\n};\n\nexport default FullApp;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}